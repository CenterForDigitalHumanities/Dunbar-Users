<!DOCTYPE html>
<html lang="en-us">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Log Out</title>
    <style>
        #loginStatus{
            font-size:  125%;
            font-weight:  bolder;
        }
    </style>
</head>

<body class="container">
    <p>
        This page will log you out of DLA.
        <a target="_blank" href="/dunbar-users/login.html">Login here</a>.
    </p>
    <script src="https://cdn.auth0.com/js/auth0/9.19.0/auth0.min.js"></script>
    <script type="text/javascript" src="./script/heartbeat.js"></script>
    <script type="text/javascript">
        /**
         * An HTML page instead of an endpoint to initiate a user log out of Dunbar Apps.
         */ 
        if (window.confirm("Do you really want to log out?")) {
            const DOMAIN = "cubap.auth0.com"
            const CLIENTID = "z1DuwzGPYKmF7POW9LiAipO5MvKSDERM"
            const redirect = "http://localhost:3000/dunbar-users/login.html"
            sessionStorage.removeItem('Dunbar-Login-Token')
            localStorage.removeItem('Dunbar-Login-Token')
            document.cookie = "Dunbar-Login-Token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;"
            stopHeartbeat()
            webAuth = new auth0.WebAuth({
                domain:       DOMAIN,
                clientID:     CLIENTID
            })
            webAuth.logout({
                returnTo: redirect,
                client_id: CLIENTID
            })    
        }
        else{
            //login.html will route them to manage.html or profile.html.
            window.location="login.html"
        }
    </script>
</body>

</html>
